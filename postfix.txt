                                    postfix

Makefile for Berkeley DB files:
https://github.com/kurkale6ka/scripts/blob/master/mail/makefile.db.sh

Forwarding:
mynetworks -> anywhere
 strangers -> relay_domains

local_recipients:
for local(8) delivery, all mydestination domains are equal, with one shared namespace.
fname.lname(@domain not needed) ok

virtual_alias_maps:
Tables will be searched in the specified order until a match is found. Yes but:

VIRTUAL(5):
user@domain address, address, ... <- 1st this form is tried against all tables
user address, address, ...        <- then this one
@domain address, address, ...     <- and finally this one

supported lookup tables:
postconf -m

Show current configuration:
postconf -nf mydestination
postconf -xf alias_maps

if empty (^), the default value can be found with:
postconf -df mydestination

Address rewriting:
          cleanup(8)                                  local(8)
canonical (envelope + headers)    -    queues    -    aliases
  virtual (envelope)

NB: in transport_maps we can overwrite the local transport with something else
    so aliases will not be reached.

virtual aliasing solves one problem:
it allows each domain to have its own info mail address

/etc/postfix/virtual:
info@example.com joe

/etc/postfix/aliases:
info: info

Certificates:
smtpd_tls_cert_file = # the .chn is actually expected as there is no smtpd_tls_ca_file

Maintenance:
postfix reload # main.cf + master.cf
postfix check  # permissions

Monitoring:
http://www.postfix.org/DEBUG_README.html
# postfix/smtpd[22222]: fatal:
tail -n10000 /var/log/maillog | egrep 'postfix/[^[:space:]]+\[[[:digit:]]+\]: (error|fatal|panic):'

Misc:
postconf -d mail_version
mailq # see all queues
postcat -q ID
qshape deferred # queue shape
